- name: Bootstrap Python for Ansible
  hosts: all
  become: true
  gather_facts: false

  vars:
    required_packages:
      - python3
      - python3-six
      - python3-apt
      - python3-distutils

  tasks:
    - name: Install Python dependencies if missing
      raw: |
        apt update -y &&
        apt install -y {{ required_packages | join(' ') }}

    - name: Verify python environment
      raw: python3 -c "import six, apt; print('Python OK')"
